(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{566:function(e,a,t){"use strict";t.r(a);var n=t(472),l=t.n(n),r=t(473),i=t(140),o=t(141),c=t(143),s=t(142),d=t(144),m=t(57),u=t(550),h=t(2),f=t.n(h),p=t(465),E=t(466),v=t(530),g=t(567),b=t(474),y=t(476),W=t(475),k=t(454),w=t(509),O=t(564),j=t(554),S=t(580),C=t(568),x=t(569),D=t(570),P=t(565),M=t(510),N=t(511),A=t(512),F=t(556),T=t(571),U=t(557),z=t(572),V=t(573),B=t(458),H=t(460),L=t(549),J=t.n(L),_=t(488),q=t.n(_),R={overflowY:"auto",height:3*window.innerHeight/5},G={display:"table-cell",verticalAlign:"middle",textAlign:"center",padding:"10px",border:"1px dashed #D3D3D3",cursor:"pointer"},I=function(e){var a=Object(h.useState)(""),t=Object(u.a)(a,2),n=t[0],l=t[1],r=Object(h.useState)(""),i=Object(u.a)(r,2),o=i[0],c=i[1];return f.a.createElement(h.Fragment,null,f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement("div",null,f.a.createElement(J.a,{className:"files-dropzone-list",ref:e.files,style:G,onChange:function(a){return function(a){return e.importFile(a)}(a)},onError:function(e){console.debug(e)},accepts:[".csv","text/csv"],multiple:!0,maxFiles:1,maxFileSize:1024e4,minFileSize:0,clickable:!0},"\uc601\ub2e8\uc5b4 \ud30c\uc77c\uc744 \uc5ec\uae30\uc5d0 \uac00\uc838\ub193\uc73c~~~")))),f.a.createElement(v.a,{divider:!0}),f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement(g.a,null,f.a.createElement(b.a,null,f.a.createElement(y.a,{type:"text",id:"google_spreadsheet",name:"google_spreadsheet",placeholder:"google spreadsheet id",onChange:function(e){l(e.target.name),c(e.target.value)}}),f.a.createElement(W.a,{addonType:"append"},f.a.createElement(k.a,{type:"button",color:"danger",onClick:function(){return function(a,t){return e.importUrl(a,t)}(n,o)}},f.a.createElement("i",{className:"fa fa-refresh"}))))))))},K=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(c.a)(this,Object(s.a)(a).call(this,e))).onShowAlert=function(e){t.setState({alertVisible:!0,alertMessage:JSON.stringify(e)},function(){window.setTimeout(function(){t.setState({alertVisible:!1})},1e4)})},t.handleSearchPattern=function(){var e=Object(r.a)(l.a.mark(function e(a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target,t.setState({searchPattern:n.value});case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.state={alertVisible:!1,alertMessage:"",groupCollapse:!0,viewCollapse:!0,loadWordModal:!1,searchPattern:"",listWords:{},activeWord:"",activeDef:"",selectedWord:{},validate:{},audioPlay:!1,iframe:"",iframe2:""},t.files=f.a.createRef(),t.toggle=t.toggle.bind(Object(m.a)(Object(m.a)(t))),t.validate=t.validate.bind(Object(m.a)(Object(m.a)(t))),t.loadWordModal=t.loadWordModal.bind(Object(m.a)(Object(m.a)(t))),t.handleWordPlay=t.handleWordPlay.bind(Object(m.a)(Object(m.a)(t))),t.searchWord=t.searchWord.bind(Object(m.a)(Object(m.a)(t))),t.handleSearchPattern=t.handleSearchPattern.bind(Object(m.a)(Object(m.a)(t))),t.importFile=t.importFile.bind(Object(m.a)(Object(m.a)(t))),t.importUrl=t.importUrl.bind(Object(m.a)(Object(m.a)(t))),t.lookupWord=t.lookupWord.bind(Object(m.a)(Object(m.a)(t))),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"toggle",value:function(e,a){var t=this;e.preventDefault();var n=this.state,l=n.activeWord,r=n.listWords;if(l!==a){var i=r[a];console.debug("selected",i),i.loaded?this.setState({activeWord:a,activeDef:i.definition,selectedWord:i,validate:{}}):Promise.all([Object(B.b)("en",a),Object(B.e)("en","ko",a)]).then(function(e){console.debug("dic=",e[0],e[1]),i.name=a,Array.isArray(e[0])&&e[0]&&Array.isArray(e[0][0].phonetics)&&e[0][0].phonetics&&(i.phonetics=e[0][0].phonetics[0]),e[1].message&&(i.definition=((e[1].message||{}).result||{}).translatedText),i.loaded=!0,t.setState({activeWord:a,activeDef:i.definition,selectedWord:i,validate:{}})}).catch(function(e){t.onShowAlert(e)})}}},{key:"searchWord",value:function(e){var a=this;e.preventDefault();var t=this.state.searchPattern;Promise.all([Object(B.b)("en",t),Object(B.e)("en","ko",t)]).then(function(e){console.debug("dic=",e[0],e[1]);var n={name:t};Array.isArray(e[0])&&e[0]&&Array.isArray(e[0][0].phonetics)&&e[0][0].phonetics&&(n.phonetics=e[0][0].phonetics[0]),e[1].message&&(n.definition=((e[1].message||{}).result||{}).translatedText),n.loaded=!0,a.setState({activeWord:t,activeDef:n.definition,selectedWord:n,validate:{}})}).catch(function(e){a.onShowAlert(e),a.setState({activeWord:"",activeDef:"",selectedWord:{},validate:{}})})}},{key:"validate",value:function(e){var a=this.state,t=a.validate,n=a.selectedWord;if(n){var l=e.target,r="checkbox"===l.type?l.checked:l.value,i=l.name;t[i]=(n[i]||"").toLowerCase().trim()===r.toLowerCase().trim(),this.setState({validate:t})}}},{key:"loadWordModal",value:function(){this.setState({loadWordModal:!this.state.loadWordModal})}},{key:"handleWordPlay",value:function(e){var a=this;e.preventDefault();var t=this.state.selectedWord;if(this.setState({audioPlay:!0}),t&&t.phonetics&&t.phonetics.audio){var n=new Audio(t.phonetics.audio).play();n&&n.then(function(){return a.setState({audioPlay:!1})})}else if(speechSynthesis&&!speechSynthesis.speaking){var l=new SpeechSynthesisUtterance(t.name);l.onend=function(e){console.debug("speak= ",e.elapsedTime+" ms"),a.setState({audioPlay:!1})},speechSynthesis.speak(l)}}},{key:"importFile",value:function(e){var a=this;if(console.debug(e),e&&e.length>0){var t=new Blob([e[0]],{type:e[0].type}),n=new FileReader;n.addEventListener("loadend",function(e){try{console.debug("import=",e.target.result);var t={};((e.target.result||"").split("\n")||{}).forEach(function(e){e.trim()&&(t[e.trim()]={isDone:!1})}),a.setState({listWords:t,selectedWord:{},validate:{},loadWordModal:!a.state.loadWordModal})}catch(e){console.debug("import=",e)}}),n.readAsText(t),this.files.current.removeFiles()}}},{key:"importUrl",value:function(e,a){var t=this;if("google_spreadsheet"===e&&a){var n=a.trim();n.startsWith("http")||(n="https://docs.google.com/spreadsheets/d/"+n+"/export?format=csv"),console.debug("import=",e,n),fetch(n,{method:"GET"}).then(function(e){return e.text().then(function(a){if(e.ok&&a){console.debug("import response=",a);var n={};(a.split("\n")||{}).forEach(function(e){e.trim()&&(n[e.trim()]={isDone:!1})}),t.setState({listWords:n,selectedWord:{},validate:{},loadWordModal:!t.state.loadWordModal})}})}).catch(function(e){console.debug("import error=",e)})}}},{key:"lookupWord",value:function(e){e.preventDefault();var a=this.state.selectedWord;a.loaded&&this.setState({iframe:'<iframe src="https://dictionary.cambridge.org/ko/%EC%82%AC%EC%A0%84/%EC%98%81%EC%96%B4-%ED%95%9C%EA%B5%AD%EC%96%B4/'+a.name+'"></iframe>',iframe2:'<iframe src="https://www.merriam-webster.com/dictionary/'+a.name+'"></iframe>'})}},{key:"shuffleWord",value:function(e){var a=e;if(a)if(a.length>3)for(;a===e;){var t=e.split("");t.sort(function(){return.5-Math.random()}),a=t.join("")}else a=this.genHiddenWord("\u2b50",a.length);return a}},{key:"genHiddenWord",value:function(e,a){for(var t=e,n=1;n<a;n++)t+=e;return t}},{key:"render",value:function(){var e=this,a=this.state,t=a.listWords,n=a.activeWord,l=a.activeDef,r=a.searchPattern,i=a.validate,o=a.audioPlay,c=a.iframe,s=a.iframe2;return f.a.createElement("div",{className:"animated fadeIn"},f.a.createElement(p.a,null,f.a.createElement(E.a,null,f.a.createElement(w.a,null,f.a.createElement(O.a,null,f.a.createElement("i",{className:"fa fa-align-justify"}),f.a.createElement("strong",null,"\ub2e8\uc5b4 \ub9ac\uc2a4\ud2b8"),f.a.createElement("div",{className:"card-header-actions"},f.a.createElement(k.a,{type:"button",color:"ghost-warning",onClick:this.loadWordModal},f.a.createElement("i",{className:"icon-cloud-download"})),f.a.createElement(k.a,{color:"light",onClick:function(){e.setState({groupCollapse:!e.state.groupCollapse})}},f.a.createElement("i",{className:"icon-arrow-up"})),f.a.createElement(j.a,{color:"warning"},"Word")),f.a.createElement(S.a,{isOpen:this.state.loadWordModal,toggle:this.loadWordModal,className:"modal-success "+this.props.className},f.a.createElement(C.a,{toggle:this.loadWordModal},"Load Words"),f.a.createElement(x.a,null,f.a.createElement(I,{files:this.files,importFile:this.importFile,importUrl:this.importUrl})),f.a.createElement(D.a,null,f.a.createElement(k.a,{color:"secondary",onClick:this.loadWordModal},"Cancel")))),f.a.createElement(P.a,{isOpen:this.state.groupCollapse},f.a.createElement(M.a,null,f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"4"},f.a.createElement(g.a,null,f.a.createElement(b.a,null,f.a.createElement(y.a,{type:"text",id:"searchPattern",name:"searchPattern",placeholder:"Search Pattern",value:r,onChange:function(a){return e.handleSearchPattern(a)},onKeyDown:function(a){"Enter"===a.key&&e.searchWord(a)}}),f.a.createElement(W.a,{addonType:"append"},f.a.createElement(k.a,{type:"button",color:"primary",onClick:this.searchWord},f.a.createElement("i",{className:"fa fa-search"}))))),f.a.createElement(N.a,{id:"list-tab",role:"tablist",style:R},Object.keys(t).sort().map(function(a,l){return f.a.createElement(A.a,{key:a,onClick:function(t){return e.toggle(t,a)},action:!0,active:n===a},t[a].isDone?a:e.genHiddenWord("\u2b50",(a||"").length))}))),f.a.createElement(E.a,{xs:"8"},f.a.createElement(w.a,null,f.a.createElement(F.a,{action:"",className:"form-horizontal",onSubmit:function(a){return e.lookupWord(a)}},f.a.createElement(O.a,null,f.a.createElement("blockquote",{className:"blockquote"},f.a.createElement("p",{className:"mb-0 h2"},this.shuffleWord(n)," ",f.a.createElement("span",{role:"img","aria-label":"donut"},"\ud83c\udf69")," ",this.shuffleWord(l)))),f.a.createElement(M.a,null,f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement(g.a,null,f.a.createElement(T.a,{htmlFor:"name"},"\ub2e8\uc5b4"),f.a.createElement(y.a,{type:"text",id:"name",name:"name",placeholder:"word",valid:i.name,invalid:!i.name,onChange:function(a){e.validate(a)}}),f.a.createElement(U.a,{invalid:!0},"\ub2e8\uc5b4\ub97c \uc798 \ub123\uc73c\uc148!")))),f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement(g.a,null,f.a.createElement(T.a,{htmlFor:"definition"},"\ub73b"),f.a.createElement(y.a,{type:"text",id:"definition",name:"definition",placeholder:"Definition",valid:i.definition,invalid:!i.definition,onChange:function(a){e.validate(a)}}),f.a.createElement(U.a,{invalid:!0},"\ub73b\uc744 \uc798 \ub123\uc73c\uc148!")))),f.a.createElement(v.a,{divider:!0}),f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement(g.a,null))),f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"6"}),f.a.createElement(E.a,{xs:"4"},f.a.createElement(k.a,{color:"light",className:"btn-pill",block:!0,disabled:!0},"\ub4e3\uae30")),f.a.createElement(E.a,{xs:"2"},f.a.createElement(H.n,{name:"enabled",className:"mx-1",variant:"pill",color:"primary",size:"lg",checked:o,onChange:function(a){e.handleWordPlay(a)}})))),f.a.createElement(z.a,null,f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"8"}),f.a.createElement(E.a,{xs:"4"},f.a.createElement(k.a,{type:"submit",color:"ghost-primary",size:"nm",block:!0},f.a.createElement("i",{className:"fa fa-database"})," \uc0c1\uc138\ubcf4\uae30"))),this.state.alertVisible&&f.a.createElement(h.Fragment,null,f.a.createElement(v.a,{divider:!0}),f.a.createElement(p.a,null,f.a.createElement(E.a,{xs:"12"},f.a.createElement(V.a,{color:"warning",isOpen:this.state.alertVisible},this.state.alertMessage))))))),s&&f.a.createElement(p.a,null,f.a.createElement(E.a,null,q()(s,{replace:function(e){"iframe"===e.name&&(e.attribs.width="100%",e.attribs.height="320")}})))))),f.a.createElement(z.a,null))))),f.a.createElement(p.a,null,f.a.createElement(E.a,null,f.a.createElement(w.a,null,f.a.createElement(O.a,null,f.a.createElement("i",{className:"fa fa-align-justify"}),f.a.createElement("strong",null,"Word Dictionary")," ",f.a.createElement("small",null),f.a.createElement("div",{className:"card-header-actions"},f.a.createElement(k.a,{color:"light",onClick:function(){e.setState({viewCollapse:!e.state.viewCollapse})}},f.a.createElement("i",{className:"icon-arrow-up"})),f.a.createElement(j.a,null,"Word"))),f.a.createElement(P.a,{isOpen:this.state.viewCollapse},f.a.createElement(M.a,null,c&&f.a.createElement(p.a,null,f.a.createElement(E.a,null,q()(c,{replace:function(e){"iframe"===e.name&&(e.attribs.width="100%",e.attribs.height="1024")}})))))))))}}]),a}(h.Component);a.default=K}}]);
//# sourceMappingURL=16.284e9060.chunk.js.map