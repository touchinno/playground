{"version":3,"sources":["util/APIUtils.js","constants/index.js","_nav.js","routes.js","containers/DefaultLayout/DefaultLayout.js"],"names":["__webpack_require__","d","__webpack_exports__","makeAccessToken","authenticate","hasRole","dictionaryApi","translateApi","_constants__WEBPACK_IMPORTED_MODULE_0__","request","headers","options","token","arguments","length","undefined","_headers","Headers","localStorage","getItem","ACCESS_TOKEN","accessToken","username","substring","indexOf","parseAccessToken","append","defaults","Object","assign","console","debug","url","fetch","then","response","json","ok","Promise","reject","catch","error","status","removeItem","window","location","replace","process","getUrl","base","URL","API_BASE_URL","protocol","host","pathname","loginRequest","Content-Type","method","body","keys","map","key","encodeURIComponent","join","user","role","roles","lang","word","PROXY_URL","from","to","X-Naver-Client-Id","X-Naver-Client-Secret","_nav","items","name","icon","badge","variant","text","title","attributes","disabled","children","divider","class","target","rel","routes","path","exact","component","React","lazy","all","e","bind","DefaultAside","DefaultFooter","DefaultHeader","DefaultLayout","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","loading","react_default","a","createElement","className","state","currentUser","isAuthenticated","loadCurrentUser","assertThisInitialized","handleLogout","nextProps","nextState","preventDefault","navconfig","navigation","filter","item","es","fixed","react","fallback","onLogout","display","navConfig","appRoutes","Container","fluid","Switch","route","idx","Route","render","Redirect","Component"],"mappings":"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","file":"static/js/12.322d7e7a.chunk.js","sourcesContent":["import {ACCESS_TOKEN, API_BASE_URL, PROXY_URL} from '../constants';\n\nconst request = (headers, options, token = true) => {\n  const _headers = new Headers(headers)\n\n  if(token && localStorage.getItem(ACCESS_TOKEN)) {\n    let accessToken = parseAccessToken(localStorage.getItem(ACCESS_TOKEN));\n    _headers.append('Authorization', 'Bearer ' + (accessToken.token || ''))\n  }\n\n  const defaults = {headers: _headers};\n  options = Object.assign({}, defaults, options);\n\n  console.debug(options.url, options);\n\n  return fetch(options.url, options)\n    .then(response =>\n      response.json().then(json => {\n        if(!response.ok) {\n          return Promise.reject(json);\n        }\n        return json;\n      })\n    ).catch(error => {\n      if (error.status === 401) {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location.replace(process.env.PUBLIC_URL + '/');\n      }\n      throw error;\n    });\n}\n\nexport function makeAccessToken(username, token) {\n  return username + '&' + token;\n}\n\nexport function parseAccessToken(token) {\n  if (!token) {\n    return { username: '' };\n  }\n  return {\n    username: token.substring(0, token.indexOf('&')),\n    token: token.substring(token.indexOf('&')+1)\n  };\n}\n\nexport function apiCallUrl(url, method, headers = {}, body = '') {\n  return request(headers, {\n    url: url,\n    method: method,\n    body: (method === 'GET') ? null : body\n  }, false);\n}\n\nexport function getUrl() {\n  if (process.env.NODE_ENV === \"development\") {\n    return API_BASE_URL;\n  }\n  let base = new URL(API_BASE_URL);\n  return window.location.protocol + \"//\" + window.location.host + base.pathname;\n}\n\nexport function authenticate(loginRequest) {\n  return request({\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }, {\n    url: getUrl() + \"/authenticate\",\n    method: 'POST',\n    body: Object.keys(loginRequest).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(loginRequest[key])).join('&')\n    //body: JSON.stringify(loginRequest)\n  }, false);\n}\n\nexport function getCurrentUser() {\n  if(!localStorage.getItem(ACCESS_TOKEN)) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({}, {\n    url: getUrl() + \"/users/me\",\n    method: 'GET'\n  });\n}\n\nexport function hasRole(user, role) {\n    return (user != null && (user.roles || []).indexOf(role) !== -1);\n}\n\n\nexport function listUsers(pattern = \"\", size = 1024) {\n  return request({}, {\n    url: getUrl() + \"/users/clients?pattern=\" + encodeURIComponent(pattern) + \"&page=0&size=\" + size,\n    method: 'GET'\n  });\n}\n\nexport function putUser(user) {\n  return request({\n    'Content-Type': 'application/json'\n  }, {\n    url: getUrl() + \"/users/clients\",\n    method: 'PUT',\n    body: JSON.stringify(user)\n  });\n}\n\nexport function deleteUser(id) {\n  return request({}, {\n    url: getUrl() + \"/users/clients/\" + encodeURIComponent(id),\n    method: 'DELETE',\n  });\n}\n\nexport function authUser(id) {\n  return request({\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }, {\n    url: getUrl() + \"/users/authenticate\",\n    method: 'POST',\n    body: \"clientId=\" + encodeURIComponent(id) + \"&secret=\"\n  });\n}\n\nexport function dictionaryApi(lang, word) {\n  return request({\n  }, {\n    url: PROXY_URL + \"https://api.dictionaryapi.dev/api/v2/entries/\" + encodeURIComponent(lang) + \"/\" + encodeURIComponent(word),\n    method: 'GET',\n  }, false);\n\n}\n\nexport function translateApi(from, to, word) {\n  return request({\n    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n    'X-Naver-Client-Id': 'VWeFHcSBRHPp7iRY8fAU',\n    'X-Naver-Client-Secret': 'bghRympbEx'\n  }, {\n    url: PROXY_URL + \"https://openapi.naver.com/v1/papago/n2mt\",\n    method: 'POST',\n    body: \"source=\" + encodeURIComponent(from) + \"&target=\" + encodeURIComponent(to) + \"&text=\" + encodeURIComponent(word),\n  }, false);\n}\n","export const API_BASE_URL = 'http://127.0.0.1:7778/api';\n// export const API_BASE_URL = 'https://analytics.voluto.net/api';\nexport const PROXY_URL = 'https://analytics.voluto.net/api/proxy/me?url=';\n// export const PROXY_URL = 'https://cors-anywhere.herokuapp.com/';\nexport const ACCESS_TOKEN = 'accessToken';\n","export default {\n  items: [\n    {\n      name: 'Playground',\n      icon: 'icon-speedometer',\n      badge: {\n        variant: 'info',\n        text: 'Play',\n      },\n      roles: [],\n    },\n    {\n      title: true,\n      name: 'vocabulary',\n      roles: [],\n    },\n    {\n      name: '단어',\n      icon: 'icon-organization',\n      attributes: { disabled: true },\n      children: [\n        {\n          name: '영어단어',\n          url: '/word',\n          icon: 'icon-badge',\n          badge: {\n            variant: 'success',\n            text: 'word'\n          }\n        },\n      ],\n    },\n    {\n      name: 'Disabled',\n      url: '/disabled',\n      icon: 'icon-layers',\n      roles: [],\n    },\n    {\n      divider: true,\n    },\n    {\n      name: 'Disabled',\n      url: '/disabled',\n      icon: 'icon-ban',\n      attributes: { disabled: true },\n      children: [\n        {\n          name: 'TO-BE',\n          url: '/tobe',\n          icon: 'icon-clock',\n          badge: {\n            variant: 'warning',\n            text: 'NEW'\n          }\n        }\n      ]\n    },\n    {\n      name: 'Download Touch App',\n      url: 'https://touch.io/download',\n      icon: 'icon-cloud-download',\n      class: 'mt-auto',\n      variant: 'success',\n      attributes: { target: '_blank', rel: \"noopener\" },\n    },\n  ],\n};\n","import React from 'react';\n\nconst Dashboard = React.lazy(() => import('./views/Dashboard'));\nconst Word = React.lazy(() => import('./views/Word'));\n\nconst routes = [\n  { path: '/', exact: true, name: 'Home' },\n  { path: '/dashboard', name: 'Dashboard', component: Dashboard },\n  { path: '/word', name: 'Word', component: Word },\n];\n\nexport default routes;\n","import React, {Component, Suspense} from 'react';\nimport {Redirect, Route, Switch} from 'react-router-dom';\nimport {Container} from 'reactstrap';\n\nimport {\n  AppAside,\n  AppBreadcrumb,\n  AppFooter,\n  AppHeader,\n  AppSidebar,\n  AppSidebarFooter,\n  AppSidebarForm,\n  AppSidebarHeader,\n  AppSidebarMinimizer,\n  AppSidebarNav,\n} from '@coreui/react';\nimport navigation from '../../_nav';\nimport routes from '../../routes';\n\nimport {hasRole} from \"../../util/APIUtils\";\n\nconst DefaultAside = React.lazy(() => import('./DefaultAside'));\nconst DefaultFooter = React.lazy(() => import('./DefaultFooter'));\nconst DefaultHeader = React.lazy(() => import('./DefaultHeader'));\n\n\nclass DefaultLayout extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentUser: null,\n      isAuthenticated: true,\n    };\n\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  loading = () => <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n\n  componentDidMount() {\n    this.loadCurrentUser();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    console.debug('process.env', process.env);\n\n    if (process.env.NODE_ENV === \"development\") {\n      if (process.env.REACT_APP_IGNORE_AUTH === \"true\") {\n        return true;\n      }\n    }\n\n    // if (!nextState.isAuthenticated) {\n    //   this.props.history.push(\"/login\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  loadCurrentUser() {\n    // getCurrentUser()\n    //   .then(response => {\n    //     this.setState({\n    //       currentUser: response,\n    //       isAuthenticated: true,\n    //     });\n    //\n    //     console.debug('user=', response);\n    //   }).catch(error => {\n    //     this.setState({\n    //       currentUser: null,\n    //       isAuthenticated: false\n    //     });\n    //   });\n  }\n\n  handleLogout(e) {\n    e.preventDefault();\n\n    // localStorage.removeItem(ACCESS_TOKEN);\n    //\n    // this.setState({\n    //   currentUser: null,\n    //   isAuthenticated: false\n    // });\n  }\n\n  render() {\n    const { currentUser } = this.state;\n\n    let navconfig = {};\n    navconfig['items'] = navigation.items.filter((item) => {\n      let roles = item.roles || [];\n      if (roles.length === 0) {\n        return true;\n      } else {\n        if (roles.filter(role => hasRole(currentUser, role)).length) {\n          return true;\n        }\n      }\n      return false;\n    });\n\n    return (\n      <div className=\"app\">\n        <AppHeader fixed>\n          <Suspense fallback={this.loading()}>\n            <DefaultHeader onLogout={this.handleLogout} user={currentUser} {...this.props} />\n          </Suspense>\n        </AppHeader>\n        <div className=\"app-body\">\n          <AppSidebar fixed display=\"lg\">\n            <AppSidebarHeader />\n            <AppSidebarForm />\n            <Suspense>\n            <AppSidebarNav navConfig={navconfig} {...this.props} />\n            </Suspense>\n            <AppSidebarFooter />\n            <AppSidebarMinimizer />\n          </AppSidebar>\n          <main className=\"main\">\n            <AppBreadcrumb appRoutes={routes}/>\n            <Container fluid>\n              <Suspense fallback={this.loading()}>\n                <Switch>\n                  {routes.map((route, idx) => {\n                    return route.component ? (\n                      <Route\n                        key={idx}\n                        path={route.path}\n                        exact={route.exact}\n                        name={route.name}\n                        render={props => (\n                          <route.component {...props} />\n                        )} />\n                    ) : (null);\n                  })}\n                  <Redirect from=\"/\" to=\"/dashboard\" />\n                </Switch>\n              </Suspense>\n            </Container>\n          </main>\n          <AppAside fixed>\n            <Suspense fallback={this.loading()}>\n              <DefaultAside />\n            </Suspense>\n          </AppAside>\n        </div>\n        <AppFooter>\n          <Suspense fallback={this.loading()}>\n            <DefaultFooter />\n          </Suspense>\n        </AppFooter>\n      </div>\n    );\n  }\n}\n\nexport default DefaultLayout;\n"],"sourceRoot":""}